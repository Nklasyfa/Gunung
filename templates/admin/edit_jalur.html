{% extends "admin/base.html" %}

{% block title %}Edit Jalur{% endblock %}

{% block content %}
<header>
    <h1>Edit Jalur: {{ jalur.nama_jalur }}</h1>
    <p>Perbarui informasi jalur pendakian.</p>
</header>

<div class="content-card" style="max-width:800px;">
    <form action="{{ url_for('admin.edit_jalur', id=jalur.jalur_id) }}" method="post" enctype="multipart/form-data">
        <div class="form-group">
            <label for="gunung_id">Pilih Gunung</label>
            <select id="gunung_id" name="gunung_id" class="form-control" required>
                {% for g in gunung_list %}
                    <option value="{{ g.gunung_id }}" {% if g.gunung_id == jalur.gunung_id %}selected{% endif %}>{{ g.nama_gunung }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="nama_jalur">Nama Jalur</label>
            <input type="text" id="nama_jalur" name="nama_jalur" class="form-control" value="{{ jalur.nama_jalur }}" required>
        </div>

        <div class="form-group">
            <label for="deskripsi">Deskripsi Jalur</label>
            <textarea id="deskripsi" name="deskripsi" class="form-control">{{ jalur.deskripsi | default('', true) }}</textarea>
        </div>

        <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px;">
            <div class="form-group">
                <label for="estimasi">Estimasi Waktu</label>
                <input type="text" id="estimasi" name="estimasi" class="form-control" value="{{ jalur.estimasi }}">
            </div>
            <div class="form-group">
                <label for="tingkat_kesulitan">Tingkat Kesulitan</label>
                <select id="tingkat_kesulitan" name="tingkat_kesulitan" class="form-control">
                    <option value="mudah" {% if jalur.tingkat_kesulitan == 'mudah' %}selected{% endif %}>Mudah</option>
                    <option value="sedang" {% if jalur.tingkat_kesulitan == 'sedang' %}selected{% endif %}>Sedang</option>
                    <option value="sulit" {% if jalur.tingkat_kesulitan == 'sulit' %}selected{% endif %}>Sulit</option>
                </select>
            </div>
        </div>
        <div style="display:grid; grid-template-columns:1fr; gap:12px; margin-top:8px;">
            <div class="form-group">
                <label for="kuota_harian">Kuota Harian Jalur (opsional)</label>
                <input type="number" id="kuota_harian" name="kuota_harian" class="form-control" value="{{ jalur.kuota_harian | default('') }}">
            </div>
        </div>

        <div class="form-group">
            <label for="tersedia">Ketersediaan Jalur</label>
            <select id="tersedia" name="tersedia" class="form-control">
                <option value="1" {% if jalur.tersedia == 1 %}selected{% endif %}>Tersedia</option>
                <option value="0" {% if jalur.tersedia == 0 %}selected{% endif %}>Tidak Tersedia</option>
            </select>
        </div>

        <div class="form-group">
            <label for="gambar_jalur">Gambar Jalur (ubah jika perlu)</label>
            {% if jalur.gambar_jalur %}
                <div style="margin-bottom:8px;">
                    <img src="{{ url_for('static', filename='uploads/jalur/' ~ jalur.gambar_jalur) }}" alt="{{ jalur.nama_jalur }}" style="max-width:200px; display:block;" />
                </div>
            {% endif %}
            <input type="file" id="gambar_jalur" name="gambar_jalur" accept="image/*" class="form-control">
        </div>

        <div class="button-group">
            <button class="btn primary" type="submit">Simpan Perubahan</button>
            <a class="btn secondary" href="{{ url_for('admin.jalur') }}">Batal</a>
        </div>
    </form>
</div>
{% endblock %}
