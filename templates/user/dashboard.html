{% extends "base.html" %}

{% block title %}Dasbor Pengguna{% endblock %}

{% block content_area_class %}content-area-bg{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/user/dashboard.css') }}">
{% endblock %}

{% block content %}

<div id="mainDashboard" class="dashboard-container">

    <div class="dashboard-header" style="margin-bottom:20px;">
        <h2 style="text-shadow: 0 1px 4px rgba(0,0,0,0.4); color: inherit; margin: 0;">Selamat datang, {{ user_nama }}</h2>
    </div>

    <div class="gunung-grid">
        {% for gunung in gunung_list %}
            <div class="card-gunung">
                {% set img_val = gunung.gambar if gunung.gambar is defined else None %}
                {% if img_val %}
                    {% if img_val.startswith('uploads/') or img_val.startswith('uploads\\') %}
                        <img src="{{ url_for('static', filename=img_val) }}" alt="{{ gunung.nama_gunung }}" class="card-img">
                    {% else %}
                        <img src="{{ url_for('static', filename='uploads/gunung/' ~ img_val) }}" alt="{{ gunung.nama_gunung }}" class="card-img">
                    {% endif %}
                {% else %}
                    <img src="{{ url_for('static', filename='images/kunung.jpg') }}" alt="Tidak Ada Gambar" class="card-img">
                {% endif %}

                <h3>{{ gunung.nama_gunung }}</h3>
                <p>Lokasi: {{ gunung.lokasi }}</p>
                <p>Tinggi: {{ gunung.ketinggian }} m</p>
                <p>Status: {{ gunung.status_pendakian }}</p>
                
                <a href="{{ url_for('user.detail_gunung', id=gunung.gunung_id) }}" class="btn-detail">Detail</a>
            </div>
        {% else %}
            <div style="grid-column: 1/-1; background: rgba(255,255,255,0.8); padding: 20px; border-radius: 10px; text-align: center;">
                <p>Tidak ada data gunung.</p>
            </div>
        {% endfor %}
    </div>

</div>

<style>
/* =======================================================
   PERBAIKAN RTL/LAYOUT KHUSUS ARAB & GRID WRAPPING
   ======================================================= */
/* 1. Kunci agar Grid responsif (Grid Wrapping Fix) */
.gunung-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
    gap: 20px;
}

/* 2. Perbaikan RTL (Right-to-Left) untuk Arab */
html[dir="rtl"] .dashboard-header {
    flex-direction: row-reverse; 
}

html[dir="rtl"] .card-gunung {
    /* Mengubah text-align center menjadi right saat Arab aktif */
    text-align: right;
}

/* =======================================================
   SISA CSS ASLI (TIDAK ADA PERUBAHAN DESAIN)
   ======================================================= */

/* Background DEFAULT (SIANG) */
body {
    background-image: url("{{ url_for('static', filename='images/kunung.jpg') }}") !important;
    background-size: cover;
    background-position: center;
    background-attachment: fixed; 
    background-repeat: no-repeat;
    transition: background-image 0.5s ease-in-out;
    background-color: #ECE9F7; 
}

/* Background DARK MODE (MALAM) */
body.dark-mode {
    background-image: url("{{ url_for('static', filename='images/bg htiam.jpg') }}") !important;
    background-color: #121212 !important;
}

/* TRANSPARANSI CONTAINER */
.dashboard-container, 
#mainDashboard,
.main-wrapper, 
.content-area {
    background: transparent !important;
    background-color: transparent !important;
}

/* --- KARTU GUNUNG (MODE SIANG) --- */
.card-gunung {
    border: 1px solid #ccc;
    border-radius: 12px;
    padding: 15px;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(5px);
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    transition: transform 0.3s, background 0.3s, color 0.3s, box-shadow 0.3s;
    text-align: center; 
}

.card-gunung:hover {
    transform: translateY(-5px);
}

.card-gunung img.card-img {
    width: 100%;
    height: 150px;
    object-fit: cover;
    border-radius: 10px;
    margin-bottom: 10px;
}

.card-gunung h3 {
    margin-top: 0;
    color: #333;
}

/* --- TOMBOL-TOMBOL --- */
.btn-detail {
    display:inline-block;
    margin-top:10px;
    padding: 8px 16px;
    background:#007BFF;
    color:#fff;
    border-radius:20px;
    text-decoration:none;
    font-size: 14px;
    transition: background 0.2s;
}

.btn-detail:hover { background:#0056b3; }

.btn-dashboard {
    padding: 8px 16px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 6px;
    transition: all 0.2s ease;
    color: white;
    text-decoration: none;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.btn-dashboard i { font-size: 14px; }

/* Warna Spesifik Tombol */
.btn-mode { background-color: #6f42c1; }
.btn-mode:hover { background-color: #5936a0; }
.btn-lang { background-color: #007bff; }
.btn-lang:hover { background-color: #0056b3; }
.btn-bantuan { background-color: #28a745; }
.btn-bantuan:hover { background-color: #218838; }

/* =========================================
   MODE MALAM / DARK MODE (Styles)
   ========================================= */
body.dark-mode h2 {
    color: #f0f0f0; 
    text-shadow: 0 1px 4px rgba(0,0,0,0.8);
}

body.dark-mode .card-gunung {
    background: rgba(30, 30, 30, 0.85);
    color: #e0e0e0;
    border-color: #444;
    box-shadow: 0 4px 10px rgba(0,0,0,0.5);
}

body.dark-mode .card-gunung h3 { color: #fff; }

body.dark-mode .btn-detail { background: #bb86fc; color: #121212; font-weight: bold; }
body.dark-mode .btn-detail:hover { background: #9a5dfc; }

body.dark-mode .btn-mode { background-color: #FFD700; color: #121212; }
body.dark-mode .btn-mode:hover { background-color: #e6c200; }

</style>

{% endblock %}
